import React from 'react';
import NavBar from '../components/NavBar.jsx'; 
import { MenuBar } from '../components/NavBar/MenuBar.jsx';
import DashboardSection from '../components/DashboardSection.jsx'
import SuccessfulApplicantsSection from '../components/applicationDashboard/SuccessfulApplicantsSection.jsx';
import PendingApplicants from '../components/applicationDashboard/PendingApplicants.jsx';
import ApplicantNumbersGraph from '../components/applicationDashboard/ApplicantNumbersGraph.jsx';
import ApplicantsEmploymentChart from '../components/applicationDashboard/ApplicantsEmploymentChart.jsx';
import TopLocationsChart from '../components/adminHomeDashboard/TopLocationsChart.jsx';
import UserBaseInfo from '../components/adminHomeDashboard/UserBaseInfo.jsx';
import RentalInfo from '../components/adminHomeDashboard/RentalInfo.jsx';
import PaymentHistoryCard from '../components/adminHomeDashboard/PaymentHistoryCard.jsx';
import RevenueLineGraph from '../components/adminHomeDashboard/RevenueLineGraph.jsx';
import { useParams } from 'react-router-dom';
import { useState, useEffect } from 'react';
import PropertyDetailListCard from '../components/tenantDashboard/PropertyDetailListCard.jsx';
import RTOGoalDetails from '../components/tenantDashboard/RTOGoalDetails.jsx';
import RentalPaymentsGraph from '../components/tenantDashboard/RentalPaymentsGraph.jsx';
import PropertyPaymentHistoryCard from '../components/tenantDashboard/PropertyPaymentHistoryCard.jsx';
import { TenantMenuBar } from '../components/tenantDashboard/TenantMenuBar.jsx';

function TenantDashboardPage() {
  // fetch id from local storage upon login
   const {id} = 1;
   const [tenantData, setTenantData] = useState({});
   const [summary, setSummary] = useState({});
   const [paymentsData, setPaymentsData] = useState([]);
  const [receipts, setReceipts] = useState([]);
  const [propertyData, setPropertyData] = useState([]);
     useEffect(() => {
    const fetchData = async () => {
      try {
        // const response = await axios.get(`http://localhost:8000/rto/get_applications/${id}/`);
       

        setPaymentsData(
            {
                "equity_ratio": 0.4,
                "revenue_amount": 10000,
                "outstanding_revenue": 10000,
                "expected_amount": 300000,
                "penalty_streak": 0,

            }
        )

        setSummary({
          "cumm_revenue_received": 400000,
          "init_value": 300000,
          "terminal_value": 200000,
          "annual_revenue": 100000,
          "acquired_interest": 9000,  //how is this of intereets to the client??
          "equity_ratio": 0.4,
          "penalty": 0,

        })

        setTenantData({
            "title": "Mr",
            "surname": "Smith",
            "first_name": "John",
            "email": "john.smith@example.com",
            "mobile_no1": "1234567890",
            "location" : "N21 25 45",
            "address" : "22, Oshodi, Lekki Phase 1",
            "rent_per_month" : 3000,
            "bedrooms":3,
            "square_ft" : 2000,
            "handing_over_date":"2021-01-01",
            "rent_type": "RTO",
            "initial_value": 300000, }
        )

    
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    };

    fetchData();
  }, [id]);


     return (
    <div className="bg-gray-100 fixed h-screen w-screen max-h-screen max-w-screen flex flex-col">
      <NavBar />
      <TenantMenuBar />
      <div className='flex justify-end m-2'>
        <button className="bg-secondary hover:bg-secondary text-white px-6 py-1 rounded-xl flex justify-end items-end" onClick={() => setIsOpen(true)}>
               + Issue Complaint
            </button>
      </div>
      
      <div className="mx-2 grid grid-cols-7 gap-2 justify-between min-h-full">
        <div className="grid grid-row-5 col-span-2">
            <div className="row-span-2 rounded-lg mb-4 p-4 bg-white">
            <RentalPaymentsGraph revenueStats={receipts}/>
            </div>
            <div className="row-span-3 buttom-0 p-4 bg-white rounded-lg">
            <PropertyDetailListCard propertyData={propertyData}/>
            </div>
        </div>

        <div className="row-span-7 col-span-5 flex flex-col">
          <div className="flex-grow row-span-3 rounded-lg mb-4 p-4 bg-white overflow-hidden">
          <RTOGoalDetails rtoProperty={propertyData}/>
          </div>
          <div className="row-span-4 overflow-auto bg-white rounded-lg shadow-sm mx-1 p-4" style={{ height: '50vh', overflowY: 'auto' }}>
            <PropertyPaymentHistoryCard paymentsData={paymentsData}/>
          </div>
        </div>

      </div>
    </div>
  );
}

export default TenantDashboardPage;
